# PPO Training Configuration with Camera for Leatherback Navigation
# Isaac Sim 5.1.0 + Stable-Baselines3
# Vision-based training (slower but more realistic)

# ============================================================================
# Environment Settings
# ============================================================================
env:
  num_envs: 1           # Single env for SB3
  use_camera: true      # Enable camera for vision-based navigation
  use_lidar: false
  episode_length_s: 120.0
  goal_tolerance: 0.5
  num_waypoints: 5
  waypoint_spacing: 4.0
  arena_radius: 25.0

  # Camera settings
  camera_resolution: [64, 64]  # Width x Height (small for fast training)
  camera_position: [0.8, 0.0, 0.8]  # Front-mounted, elevated

  # Obstacle settings (randomized each episode)
  num_obstacles_min: 3
  num_obstacles_max: 8
  obstacle_spawn_radius_min: 6.0   # Minimum 6m from robot spawn
  obstacle_spawn_radius_max: 18.0
  obstacle_size_min: [0.5, 0.5, 0.5]
  obstacle_size_max: [2.0, 2.0, 1.5]
  randomize_obstacle_colors: true
  randomize_obstacles_on_reset: true
  obstacle_min_spawn_distance: 2.0

# ============================================================================
# PPO Hyperparameters (tuned for vision)
# ============================================================================
ppo:
  policy: "MultiInputPolicy"  # Handles Dict obs with image + vector
  learning_rate: 0.0001       # Lower LR for vision (more stable)
  n_steps: 1024               # Smaller rollout for faster iteration
  batch_size: 32              # Smaller batch for GPU memory
  n_epochs: 5                 # Fewer epochs for vision
  gamma: 0.99
  gae_lambda: 0.95
  clip_range: 0.2
  ent_coef: 0.02              # Higher entropy for more exploration
  vf_coef: 0.5
  max_grad_norm: 0.5

# ============================================================================
# Training Settings
# ============================================================================
training:
  total_timesteps: 500000     # Reduced - vision training is slower
  eval_freq: 10000
  n_eval_episodes: 3
  checkpoint_freq: 25000
  log_interval: 5             # More frequent logging

# ============================================================================
# Paths
# ============================================================================
paths:
  save_dir: "models/ppo_camera"
  log_dir: "logs/ppo_camera"
  tensorboard_dir: "logs/tensorboard"

# ============================================================================
# Hardware
# ============================================================================
hardware:
  device: "cuda"              # GPU required for vision training
  seed: 42
